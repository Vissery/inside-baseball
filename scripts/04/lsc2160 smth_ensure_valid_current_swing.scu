; LSC2 4 2160 smth_ensure_valid_current_swing

local variable local0
local variable local1
local variable local2
local variable local3
local variable local4
local variable local5
local variable local6
local variable local7
local variable local8
local variable local9

if (gCurrentSwing == 0) {
    gCurrentSwing = SWING-LINE-DRIVE
}
run-script SetSwingSounds []
if (gTeeBall || MODE-BATTING-PRACTICE == gGameMode) {
    local7 = 2
    local6 = 2
} else {
    local7 = 7
    local6 = 3 + g_maybe_powerup_state[gBattingTeamInfoIndex][0]
    local6 = max local6 3
}
temp = min local6 3
local1 = 328 - 64 * (temp + 1)
local2 = local1 / (temp + 2)
local3 = 64 + local2
sprite-group-select 23
sprite-group-clear
sprite-group-x41 0 0
sprite-group-select 24
sprite-group-clear
sprite-group-x41 0 0
for local0 = 0 to local7 ++ {
    local5 = 1 + local0
    if (local0 > 3) {
        if (g_maybe_powerup_state[gBattingTeamInfoIndex][local0 - 3] == 0) {
            if (local0 == gCurrentSwing - 1) {
                gCurrentSwing = gCurrentSwing - 4
                rSelectedPitchOrSwingSprite = gCurrentSwing
                sprite-set-range (gCurrentSwing - 1 + 1) (gCurrentSwing - 1 + 1)
                sprite-x34 1
            }
            sprite-set-range local5 local5
            sprite-clear
            goto label0187
        }
    } else {
        if (local0 == gCurrentSwing - 1) {
            local4 = 1
            rSelectedPitchOrSwingSprite = local0 + 1
        } else {
            local4 = 0
        }
        if (local0 > 3) {
            local8 = 24
            local9 = local0 - 3 - 1
        } else {
            local8 = 23
            local9 = local0
        }
        sprite-set-range local5 local5
        sprite-clear
        sprite-set-image (343 + local0)
        sprite-x34 local4
        sprite-xc6 1 (local0 + 1)
        sprite-x25 local8
        sprite-x52 0
        sprite-set-hotspot 720 (local3 + 64 * local9 + local2 * local9)
    }
label0187:
}
sprite-group-select 24
sprite-group-x41 -80 0
for local0 = (local5 + 1) to 10 ++ {
    sprite-set-range local0 local0
    sprite-clear
}
free-script
